<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" style="height:64px;margin-right:32px"/>

# Можешь составить ТЗ на основе всего контекста, чтобы я перенёс проект в новое окружение?

Техническое задание (ТЗ) на перенос и запуск проекта музыкального избранного с использованием SQLite и npyscreen

***

## 1. Цель проекта

Развернуть и запустить проект для управления музыкальными избранными (треки, альбомы, исполнители, плейлисты) с интерфейсом TUI на базе библиотеки npyscreen и базой данных SQLite.

***

## 2. Основные компоненты

### 2.1. Интерфейс (interactive_ui.py)

- Использование npyscreen для консольного текстового интерфейса.
- Главное меню с возможностью заходить в раздел избранного.
- Форма для отображения избранных треков с:
    - списком треков из таблицы favorites и tracks;
    - строкой статуса (состояние загрузки или ошибки);
    - подсказкой горячих клавиш (например, Ctrl+S для синхронизации, Esc для выхода).
- Обработка пользовательских команд и синхронизация с API.


### 2.2. Работа с базой данных (db_utils.py)

- Функция создания таблиц (если отсутствует):
    - favorites (id, entity_type, entity_id, добавлено),
    - tracks (id, title, artist).
- Функции вставки и обновления записей favorites и tracks.
- Логика подключения к базе централизована в db_utils.py.
- Использование транзакций для безопасности вставок/обновлений.


### 2.3. Синхронизация с API (favorite_tracks.py)

- Получение избранных треков из Yandex Music API.
- Синхронизация таблицы favorites с актуальными ID и типами элементов.
- Синхронизация таблицы tracks с подробными данными о треках.
- Вызывать операции обновления БД через db_utils.py.

***

## 3. Сценарии использования

- При старте проекта вызывается создание таблиц в БД (если не созданы).
- Пользователь запускает интерфейс `python3 yandex_music_sync.py --interactive`.
- Появляется главное меню, откуда можно перейти в избранное.
- В разделе избранного отображается список треков с названиями и исполнителями.
- Пользователь может нажать Ctrl+S для запуска синхронизации с API.
- После завершения синхронизации список обновляется.
- При выходе приложение корректно завершает работу.

***

## 4. Технические требования

- Python 3.12 или выше.
- Установленные библиотеки: npyscreen, sqlite3 (встроен), yandex-music-api (или собственная обертка).
- Минимальный размер терминала: 24 строки, 80 колонок для нормальной работы интерфейса.
- Файл базы данных `music.db` должен храниться в каталоге проекта.
- Все операции с базой происходят через функции из db_utils.py.
- Использовать обработку ошибок при работе с БД и API, выводить информативные сообщения в интерфейсе.

***

## 5. Рекомендации по переносy в новое окружение

1. Скопировать весь проект, включая:
    - исходные файлы Python
    - файл базы `music.db` (если есть)
2. Создать и активировать виртуальное окружение Python с нужной версией.
3. Установить зависимости из `requirements.txt` (npyscreen, yandex-music-api и пр.).
4. Запустить скрипт создания таблиц из db_utils.py перед первым запуском.
5. Запустить интерфейс: `python3 yandex_music_sync.py --interactive`.
6. При необходимости провести синхронизацию избранного.
7. Проверить работоспособность основных функций и отсутствие ошибок.
8. Настроить параметры запуска и внешние сервисы (API ключи, прокси и т.п.).

***

Если нужно, могу помочь составить пример `requirements.txt` и скрипт установки окружения под проект.
<span style="display:none">[^1][^2][^3][^4][^5][^6][^7][^8][^9]</span>

<div style="text-align: center">⁂</div>

[^1]: https://habr.com/ru/companies/ruvds/articles/912886/

[^2]: https://official.satbayev.university/download/document/26794/2022_%D0%91%D0%90%D0%9A%D0%9C%D0%B0%D0%BC%D0%B5%D0%B4%D0%BE%D0%B2%D0%90%D1%81%D0%B4%D0%B0%D0%BD_%D0%9C%D0%B8%D1%80%D0%B7%D0%B0%D0%BE%D0%B3%D0%BB%D1%8B.pdf

[^3]: https://www.kubsu.ru/sites/default/files/users/14819/portfolio/hachatryan_010402_vkr.pdf

[^4]: https://lred.ru/bd/836---sqlite

[^5]: https://elib.pnzgu.ru/files/eb/doc/sv1hrV0WvpNC.pdf

[^6]: https://case.predprof.olimpiada.ru/media/attachments/website_section/49/%D0%9A%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%BD%D1%8B%D0%B8_%D0%BA%D0%B5%D0%B8%D1%81_3_%D0%A0%D0%B0%D1%81%D0%BF%D0%BE%D0%B7%D0%BD%D0%B0%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D0%B8_%D0%B2%D0%BE%D1%81%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5_%D0%BD%D0%BE%D1%82.pdf

[^7]: https://ksdr.profi.ru/it_freelance/subd-sqlite/tihoreck/

[^8]: https://www.weblancer.net/freelance/sqlite/

[^9]: https://mospolytech.ru/sveden/files/B.1.DV.4_Razrabotka_mobilynyx_prilogheniy.pdf

